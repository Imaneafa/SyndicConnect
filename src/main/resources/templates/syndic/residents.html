<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Gestion des rÃ©sidents</title>

  <link rel="stylesheet" th:href="@{/css/variables.css}">
  <link rel="stylesheet" th:href="@{/css/main.css}">
  <link rel="stylesheet" th:href="@{/css/layout.css}">
  <link rel="stylesheet" th:href="@{/css/syndic.css}">
</head>

<body>

<div class="page-container">

  <div class="page-header">
    <h1>ğŸ‘¥ Gestion des rÃ©sidents</h1>
    <p class="subtitle">Vue globale des habitants de la rÃ©sidence</p>
  </div>

  <div class="card">

    <table class="data-table">
      <thead>
      <tr>
        <th>Nom</th>
        <th>Email</th>
        <th>Appartement</th>
        <th>ProblÃ¨mes</th>
        <th>ImpayÃ©s</th>
        <th>Action</th>
      </tr>
      </thead>

      <tbody>
      <tr th:each="r : ${residents}">

        <td>
          <strong th:text="${r.nom}"></strong>
        </td>

        <td th:text="${r.email}"></td>

        <td>
                    <span class="badge badge-blue"
                          th:text="${r.numeroAppartement}">
                    </span>
        </td>

        <td>
                    <span class="badge badge-orange"
                          th:text="${r.problemes.size()}">
                    </span>
        </td>

        <td>
                    <span class="badge"
                          th:classappend="${r.nbCotisationsNonPayees > 0} ? 'badge-red' : 'badge-green'"
                          th:text="${r.nbCotisationsNonPayees}">
                    </span>
        </td>

        <td>
          <form th:action="@{/syndic/residents/delete/{id}(id=${r.id})}"
                method="post"
                onsubmit="return confirm('âš ï¸ Voulez-vous vraiment supprimer ce rÃ©sident ?');">

            <button class="btn-danger">ğŸ—‘ Supprimer</button>
          </form>
        </td>

      </tr>
      </tbody>
    </table>

  </div>

  <a class="back-link" th:href="@{/syndic/home}">â¬… Retour au dashboard</a>

</div>

</body>
</html>

