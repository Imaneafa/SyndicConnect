<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Gestion des problÃ¨mes</title>

    <link rel="stylesheet" th:href="@{/css/variables.css}">
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/layout.css}">
    <link rel="stylesheet" th:href="@{/css/table.css}">
</head>
<body>

<div class="page-container">

    <header class="page-header">
        <h1>ðŸ“‹ Gestion des problÃ¨mes</h1>
        <a class="btn secondary" th:href="@{/syndic/home}">â¬… Dashboard</a>
    </header>

    <!-- ===== FILTRES ===== -->
    <div class="filter-bar">
        <a href="?statut=En attente" class="filter red">ðŸ”´ En attente</a>
        <a href="?statut=En cours" class="filter orange">ðŸŸ  En cours</a>
        <a href="?statut=RÃ©solu" class="filter green">ðŸŸ¢ RÃ©solus</a>
        <a href="/syndic/problemes" class="filter">ðŸ”„ Tous</a>
    </div>

    <!-- ===== TABLE ===== -->
    <div class="table-card">
        <table>
            <thead>
            <tr>
                <th>Titre</th>
                <th>RÃ©sident</th>
                <th>Date</th>
                <th>Statut</th>
                <th>Action</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="p : ${problemes}">
                <td th:text="${p.titre}"></td>
                <td th:text="${p.auteur.nom}"></td>
                <td th:text="${#temporals.format(p.dateCreation,'dd/MM/yyyy')}"></td>

                <!-- STATUT -->
                <td>
                    <span th:if="${p.statut=='En attente'}" class="badge red">En attente</span>
                    <span th:if="${p.statut=='En cours'}" class="badge orange">En cours</span>
                    <span th:if="${p.statut=='RÃ©solu'}" class="badge green">RÃ©solu</span>
                </td>

                <!-- ACTION -->
                <td>
                    <a class="btn primary"
                       th:href="@{/syndic/problemes/{id}(id=${p.id})}">
                        DÃ©tails
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

</div>

</body>
</html>
